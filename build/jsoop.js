(function(){var b=Object.prototype.toString,a={};a.GLOBAL=Function("return this")();a.STRING=1;a.ARRAY=2;a.NUMBER=3;a.OBJECT=4;a.ELEMENT=5;a.BOOL=6;a.FUNCTION=7;a.is=function(d,c){if(a.isString(c)){return a.instanceOf(d,c)}switch(c){case a.BOOL:return a.isBool(d);case a.STRING:return a.isString(d);case a.ARRAY:return a.isArray(d);case a.NUMBER:return a.isNumber(d);case a.OBJECT:return a.isObject(d);case a.ELEMENT:return a.isElement(d);case a.FUNCTION:return a.isFunction(d);default:return false}};a.isString=function(c){return typeof c==="string"};a.isArray=function(c){return b.call(c)==="[object Array]"};a.isBool=function(c){return typeof c==="boolean"};a.isNumber=function(c){return typeof c==="number"};a.isObject=function(c){return c instanceof Object&&c.constructor===Object};a.isElement=function(c){return c?c.nodeType===1:false};a.isPrimative=function(d){var c=typeof d;return c==="string"||c==="number"||c==="boolean"};a.isFunction=function(c){return b.call(c)==="[object Function]"};a.instanceOf=function(d,c){if(a.isString(c)){c=a.objectQuery(c)}return d instanceof c};a.iterate=function(e,d){if(!a.isObject(e)){return false}var c;for(c in e){if(e.hasOwnProperty(c)){if(d(e[c],c,e)===false){return false}}}return true};a.each=function(c,e){if(!a.isArray(c)){return e(c,0,[c])}var d,f;for(d=0,f=c.length;d<f;d=d+1){if(e(c[d],d,c)===false){return false}}return true};a.apply=function(e,d){var c;for(c in d){if(d.hasOwnProperty(c)){e[c]=d[c]}}};a.applyIf=function(e,d){var c;for(c in d){if(d.hasOwnProperty(c)){if(!e.hasOwnProperty(c)){e[c]=d[c]}}}};a.namespace=function(g){var f=g.split("."),e=a.GLOBAL,c,d;for(c=0,d=f.length;c<d;c=c+1){if(e[f[c]]===undefined){e[f[c]]={}}e=e[f[c]]}return e};a.objectQuery=function(g,c){var f=g.split("."),d,e;c=c||a.GLOBAL;for(d=0,e=f.length;d<e;d=d+1){if(c[f[d]]===undefined){return undefined}c=c[f[d]]}return c};a.clone=(function(){function c(f){var g,d,e;if(a.isPrimative(f)){return f}else{if(a.isArray(f)){g=[];for(d=0,e=f.length;d<e;d=d+1){g.push(c(f[d]))}return g}else{if(a.isObject(f)){g={};for(d in f){if(f.hasOwnProperty(d)){g[d]=c(f[d])}}return g}}}return f}return c}());a.emptyFn=function(){};a.log=(console)?console.log.bind(console):a.emptyFn;a.GLOBAL.JSoop=a}());(function(){JSoop.error=function(b){var a=arguments,c=this.error.caller;if(JSoop.isString(b)){b={level:"error",msg:b,stack:true}}if(c){if(c.$name){b.sourceMethod=c.$name}if(c.$owner){b.sourceClass=c.$owner.$className}}if(JSoop.throwErrors!==false){JSoop.log(b)}throw b.msg}}());(function(){var b=JSoop.Base=function(){},c=function(){},a=Object.create||function(e){var d;c.prototype=e;d=new c();c.prototype=null;return d};b.prototype={$className:"JSoop.Base",$class:b,$isClass:true,initConfig:function(d){var f=this,g=f.defaults,e=f.$class.prototype;if(!d){d={}}f.originalConfig=d;while(g){JSoop.applyIf(d||{},JSoop.clone(g));if(e.superClass){e=e.superClass.prototype;g=e.defaults}else{g=false}}JSoop.apply(f,d)},constructor:function(d){var e=this;e.initConfig(d||{});e.init();return e},addMember:function(d,f){var e=this;if(JSoop.isFunction(f)){e.prototype.addMethod.call(e,d,f)}else{e.prototype.addProperty.call(e,d,f)}},addMethod:function(d,f){var e=this;f.$owner=e;f.$name=d;e.prototype[d]=f},addProperty:function(d,e){this.prototype[d]=e},alias:function(g,e){var f=this,d=f.prototype;if(JSoop.isString(e)){e={name:e}}JSoop.applyIf(e,{root:d});if(JSoop.isString(e.root)){e.root=JSoop.objectQuery(e.root)}e.root[e.name]=d[g]},extend:function(d){var g=d;if(JSoop.isString(g)){g=JSoop.objectQuery(g)}if(!g){JSoop.error(d+" is not defined")}var f=this,e;f.prototype=a(g.prototype);f.superClass=f.prototype.superClass=g;if(!g.prototype.$isClass){for(e in b.prototype){if(b.prototype.hasOwnProperty(e)){f.prototype[e]=b.prototype[e]}}}f.prototype.$class=f}}}());(function(){JSoop.Base.prototype.callParent=function(c){var e=this,b=arguments,g=e.callParent.caller,a,f,d;if(g!==null&&!g.$owner){if(!g.caller){JSoop.error("Unable to locate method for callParent to execute.")}g=g.caller}if(!g.$owner){JSoop.error("Unable to resolve method for callParent. Make sure all methods are added using JSoop.define.")}a=g.$name;f=g.$owner.superClass;d=f;do{if(d.prototype.hasOwnProperty(a)){break}d=d.superClass}while(d);if(!d){JSoop.error('No parent method "'+a+'" was found in '+f.prototype.$className+".")}return f.prototype[a].apply(this,c||[])}}());(function(){var c=function(){function f(){return this.constructor.apply(this,arguments)||null}return f},d={},b={},e=JSoop.Base.prototype,a=JSoop.ClassManager={};JSoop.apply(a,{processors:{},create:function(i,g,l){if(b[i]){return}JSoop.applyIf(g,{extend:"JSoop.Base"});var j=this,k=c(),f=[],h;e.extend.call(k,g.extend);k.prototype.$className=i;for(h in g){if(g.hasOwnProperty(h)){if(!a.processors.hasOwnProperty(h)){e.addMember.call(k,h,g[h])}else{f.push(h)}}}g.onCreate=l||JSoop.emptyFn;j.initProcessors(f,g);j.process.call(a,i,k,g,a.process)},initProcessors:function(f,g){JSoop.each(f,function(i,h){f[h]=a.processors[i]});g.processors=f},process:function(i,f,g,k){var j=this,h=g.processors.shift();if(!h){j.set(i,f);g.onCreate(f);return}if(h.call(a,i,f,g,k)!==false){k.call(a,i,f,g,k)}},set:function(h,f){b[h]=f;var g=h.split(".");h=g.pop();g=JSoop.namespace(g.join("."));g[h]=f},getInstantiator:function(j){var h=this,f,g;h.instantiators=h.instantiators||[];if(j>3){}if(!h.instantiators[j]){f=[];for(g=0;g<j;g=g+1){f.push("a["+g+"]")}h.instantiators[j]=new Function("c","a","return new c("+f.join(",")+");")}return h.instantiators[j]},instantiate:function(){var i=this,g=Array.prototype.slice.call(arguments,0),h=g.shift(),f=b[h];return i.getInstantiator(g.length)(f,g)}});JSoop.apply(a.processors,{extend:function(){},aliases:function(i,f,g,j){var h;if(!g.aliases){g.aliases={}}for(h in g.aliases){if(g.aliases.hasOwnProperty(h)){e.alias.call(f,h,g.aliases[h])}}},mixins:function(h,f,g,i){if(!g.mixins){g.mixins={}}f.prototype.mixins={};JSoop.iterate(g.mixins,function(j,k){if(JSoop.isString(j)){j=JSoop.objectQuery(j)}f.prototype.mixins[k]=j;var l;for(l in j.prototype){if(j.prototype.hasOwnProperty(l)&&l!=="constructor"&&l.indexOf("$")===-1){f.prototype[l]=j.prototype[l]}}})},singleton:function(h,f,g,i){if(!g.singleton){return true}i.call(a,h,new f(),g,i);return false},statics:function(h,f,g,i){if(!g.statics){g.statics={}}JSoop.iterate(g.statics,function(k,j){f[j]=k})}});JSoop.define=function(){a.create.apply(a,arguments)};JSoop.create=function(){return a.instantiate.apply(a,arguments)}}());(function(){var b={single:true,scope:true},a=function(){this.listeners=[]};JSoop.apply(a.prototype,{addListener:function(d){var c=this;d=c.initListener(d);c.listeners.push(d)},initListener:function(d){var c=this;d.callFn=d.fn;if(d.single){d.callFn=c.createSingle(d)}if(d.scope){d.callFn=c.createScope(d)}return d},createSingle:function(d){var c=this;return function(){var e=d.callFn.apply(this,arguments);c.removeListener(d.fn);return e}},createScope:function(d){var c=d.callFn;return function(){return c.apply(d.scope,arguments)}},removeListener:function(d){var f=this,c,e;for(c=0,e=f.listeners.length;c<e;c=c+1){if(f.listeners[c].fn===d){f.listeners.splice(c,1);return}}},removeAllListeners:function(){this.listeners=[]},fire:function(){var f=this,d=f.listeners.slice(),c,e;for(c=0,e=d.length;c<e;c=c+1){if(d[c].callFn.apply(this,arguments)===false){return}}}});JSoop.define("JSoop.mixins.Observable",{isObservable:true,aliases:{addListener:"on",removeListener:"un",addManagedListener:"mon",removeManagedListener:"mun"},constructor:function(){var c=this;if(c.listeners){c.on(c.listeners)}},addEvents:function(){var e=this,c,d;e.events=e.events||{};for(c=0,d=arguments.length;c<d;c=c+1){if(!e.events[arguments[c]]){e.events[arguments[c]]=new a()}}},addListener:function(d,i,j,k){var f=this,g=d,e={},c,h;if(!JSoop.isObject(g)){g={ename:g,fn:i,scope:j}}if(g.ename){if(k){JSoop.apply(g,k)}if(!f.hasEvent(g.ename)){f.addEvents(g.ename)}f.events[g.ename].addListener(g)}else{for(h in g){if(g.hasOwnProperty(h)&&b.hasOwnProperty(h)){e[h]=g[h]}}for(h in g){if(g.hasOwnProperty(h)&&!b.hasOwnProperty(h)){c=g[h];if(JSoop.isObject(c)){c.ename=h}else{if(JSoop.isFunction(c)){c={ename:h,fn:c}}}JSoop.applyIf(c,e);f.addListener(c)}}}},hasEvent:function(c){return(this.events||{}).hasOwnProperty(c)},removeListener:function(c,d){var e=this;if(!e.hasEvent(c)){return}e.events[c].removeListener(d)},removeAllListeners:function(d){var e=this,c;if(!d){for(c in e.events){if(e.events.hasOwnProperty(c)){e.events[c].removeAllListeners()}}return}if(!e.hasEvent(d)){return}e.events[d].removeAllListeners()},fireEvent:function(){var f=this,d=Array.prototype.slice.call(arguments,0),e=d.shift(),c="on"+e.substr(0,1).toUpperCase()+e.substr(1);if(!f.hasEvent(e)){return}if(f[c]&&JSoop.isFunction(f[c])){if(f[c].apply(f,d)===false){return}}f.events[e].fire.apply(f.events[e],d)},addManagedListener:function(i,e,g,f,d){var h=this,c=h.managedListeners=h.managedListeners||[];c.push({observable:i,ename:e,fn:g});i.on(e,g,f,d)},removeManagedListener:function(j,e,f){var h=this,c=(h.managedListeners)?h.managedListeners.slice():[],d,g;for(d=0,g=c.length;d<g;d=d+1){h.removeManagedListenerItem(false,c[d],j,e,f)}},removeManagedListenerItem:function(c,h,i,e,f){var g=this,d=g.managedListeners||[];if(c||(h.observable===i&&(!e||h.ename===e)&&(!f||h.fn===f))){h.observable.un(h.ename,h.fn);d.splice(d.indexOf(h),1)}},removeAllManagedListeners:function(){var f=this,c=(f.managedListeners)?f.managedListeners.slice():[],d,e;for(d=0,e=c.length;d<e;d=d+1){f.removeManagedListenerItem(true,c[d])}}})}());